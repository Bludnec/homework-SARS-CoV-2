{% extends "index.html" %}
{% block content %}
    <style>
        .noCursorPointer {
            cursor: default !important;
        }
    </style>
    <table id="province-table" class="display">
        <thead>
        <tr>
            <th>Region code</th>
            <th>Region name</th>
            <th>Total of cases</th>
            <th>Number of provinces</th>
        </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
{% endblock content %}
{% block page_script %}
    <script>
        let province_table = $("#province-table").DataTable({
            "order": [[2, "desc"]],
            "pageLength": 50,
            "bLengthChange" : false,
            "layout": {
                "topEnd": {
                    "buttons": [
                        {
                            "extend": 'excelHtml5',
                            "text": 'Export to Excel the current data',
                            "exportOptions": {
                                "columns": [1, 2],
                                "modifier": {
                                    "order": 'current',
                                    "page": 'all'
                                },
                            },
                        }
                    ]
                },
                "topStart": {
                    "buttons": [
                        {
                            "text": 'Last update {{ last_data_import }}',
                            'className': 'noCursorPointer',
                            "attr": {
                                "id": 'data-import-province-button',
                            }
                        }
                    ]
                }
            },
            "columns": [
                {"data": "region_code"},
                {"data": "region_name"},
                {"data": "total_cases"},
                {"data": "numero_province"},
            ],
            "ajax": {
                "url": "{% url "dataimport:data_import_province_table_ajax" %}",
                "type": "POST"
            },
            "processing": true,
            "serverSide": true,
            "searching": false,
            "columnDefs": [],
        });
    </script>
{% endblock page_script %}
